1. Setup Amazon EC2

See http://probablyinteractive.com/2009/3/29/Amazon%20EC2%20+%20Chef%20=%20Mmmmm.html

1.1 Sign up
1.2 Download EC2 tools and extract to ~/tools, rename or make a symbolic link ~/tools/ec2-api-tools
1.3 Change bash profile to add
export EC2_HOME=~/tools/ec2-api-tools
export PATH=$PATH:$EC2_HOME/bin
export EC2_PRIVATE_KEY=~/.ec2/pk.pem
export EC2_CERT=~/.ec2/cert.pem

1.4 Create and download pk-????.pem and cert-????.pem, move to ~/.ec2, rename to pk.pem and cert.pem
1.5 open new console and run
ec2-add-keypair ec2-keypair > ~/.ssh/ec2-keypair
chmod 600 ~/.ssh/ec2-keypair
ec2-authorize default -p 22
ec2-authorize default -p 80

2. Start EC2 instance

ec2-run-instances ami-71fd1a18 -k ec2-keypair
ec2-describe-instances
The public domain name is something like ec2-XXX-XXX-XXX-XXX.compute-1.amazonaws.com

3. Connect to EC2 instance

ssh -i ~/.ssh/ec2-keypair root@INSTANCE_DOMAIN_NAME
logout
ssh-add ~/.ssh/ec2-keypair    # Phew, Now you don't have to use the -i option again (until you restart you computer)

4. Chef bootstrap

scp ~/proj/chef/chef-bootstrap root@INSTANCE_DOMAIN_NAME:/tmp
ssh root@INSTANCE_DOMAIN_NAME "ruby /tmp/chef-bootstrap"

5. Run chef

cd ~/proj/chef && rake cook server=root@INSTANCE_DOMAIN_NAME

6. Deploy rails application

Update RAILS_APP/config/deploy.rb to match what is specified in dna.rb
cap deploy:setup
cap deploy:start
cap deploy:migrations